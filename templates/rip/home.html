{#{% extends "base/base.html" %}#}
{% autoescape on %}
{% load staticfiles %}

{#combine this with another base page#}
<link rel="stylesheet" type="text/css" href="/static/css/base/mbase.css" media="screen, handheld" />
<link rel="stylesheet" type="text/css" href="/static/css/base/base.css" media="screen  and (min-width: 40.5em)" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

<link rel="stylesheet" type="text/css" href="{% static 'lib/bootstrap/css/bootstrap.min.css' %}" />
<script type="text/javascript" src='{% static "lib/bootstrap/js/bootstrap.min.js" %}'></script>
<script type="text/javascript" src='{% static "js/base/init.js" %}'></script>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

<div id="header">

<div id="headercontent">

<span class="glyphicon glyphicon-search" ></span>

    <input type="text" placeholder="Search Earthworkx" />


{#<div id="title">earthworkx</div> #}

<div class="holder" id="menudropdown">
    <span class="glyphicon glyphicon-menu-hamburger" id="menudropdown"></span>


  <div id="home-dropdown" class="dropdown-content">
    <a href="/login/logout/">Logout</a>
  </div>

</div>

<div class="holder" id="buy">
    <span class="glyphicon glyphicon-shopping-cart"></span>
</div>

<div class="holder" id="sell">
    <span class="glyphicon glyphicon-tag"></span>
</div>


</div>

</div>

{% block content %}

<div id="container">

<div id="mapholder">
<div id="map"></div>
</div>
<script>


function getLat(){
    return lat;
}
function getLng(){
    return lng;
}
function setLat(input){
    lat = input;
}
function setLng(input){
    lng = input;
}


function getLocation() {

    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, showError);
    } else {
        alert("Geolocation is not supported by this browser.");
    }
}

function showPosition(position) {

    var lat = position.coords.latitude;
    var lng = position.coords.longitude;

    setLat(lat);
    setLng(lng);

    initMap();

}

function showError(error) {
    // If no location, show a mobile friendly modal asking to enable location

    switch(error.code) {
        case error.PERMISSION_DENIED:
            setLat(37.5407);
            setLng(-77.4360);
            initMap();
        case error.POSITION_UNAVAILABLE:
            setLat(37.5407);
            setLng(-77.4360);
            initMap();
        case error.TIMEOUT:
            setLat(37.5407);
            setLng(-77.4360);
            initMap();
        case error.UNKNOWN_ERROR:
            setLat(37.5407);
            setLng(-77.4360);
            initMap();
    }
}

getLocation()

var map;
function initMap() {
    var userLatLng = new google.maps.LatLng(getLat(), getLng());
    map = new google.maps.Map(document.getElementById('map'), {
        center: userLatLng,
        zoom: 18,
        disableDefaultUI: true,
    });
}
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAilDy0SeP5Ex17VlL5-1v1G-Ej5SGB3s4&callback=initMap" async defer>

</script>
</div>

<div class="modal fade" id="alertModal" role="dialog" style='width:100%; margin-top: 30px;font-size:18;'>
<div class="modal-dialog modal-lg" style='width:700px;'>
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
             <h5 class="modal-title" name='mdhd'></h5>
        </div>

        <div class="modal-body" name='mdbd'>


        </div>
        <div class="modal-footer">


        </div>
    </div>
</div>
</div>

{% endblock %}
{% endautoescape %}